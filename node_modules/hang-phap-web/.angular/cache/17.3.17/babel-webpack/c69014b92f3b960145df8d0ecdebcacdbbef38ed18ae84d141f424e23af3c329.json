{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/api.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nfunction AdminComponent_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cat_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", cat_r1._id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(cat_r1.name.vi);\n  }\n}\nfunction AdminComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function AdminComponent_div_12_Template_button_click_4_listener() {\n      const product_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.toggle(product_r3));\n    });\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", product_r3.title, \" - \", i0.ɵɵpipeBind1(3, 3, product_r3.variants[0] == null ? null : product_r3.variants[0].price), \"\\u0111\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", product_r3.isActive ? \"Ng\\u1EEBng b\\u00E1n\" : \"K\\u00EDch ho\\u1EA1t\", \" \");\n  }\n}\nexport let AdminComponent = /*#__PURE__*/(() => {\n  class AdminComponent {\n    constructor(api, fb) {\n      this.api = api;\n      this.fb = fb;\n      this.products = [];\n      this.categories = [];\n      this.form = this.fb.group({\n        title: [''],\n        slug: [''],\n        brand: [''],\n        category: [''],\n        images: [''],\n        price: [0]\n      });\n    }\n    ngOnInit() {\n      this.loadProducts();\n      this.loadCategories();\n    }\n    loadProducts() {\n      this.api.get('/products', {\n        page: 1\n      }).subscribe(res => {\n        this.products = res.items;\n      });\n    }\n    loadCategories() {\n      this.api.get('/categories/tree').subscribe(res => {\n        this.categories = res;\n      });\n    }\n    createProduct() {\n      const value = this.form.value;\n      const payload = {\n        title: value.title,\n        slug: value.slug,\n        brand: value.brand,\n        categories: value.category ? [value.category] : [],\n        images: value.images?.split(',').map(url => url.trim()),\n        hasVariants: true,\n        variants: [{\n          price: value.price,\n          inventory: 20,\n          options: {}\n        }],\n        madeIn: 'France',\n        inci: 'N/A',\n        isActive: true\n      };\n      this.api.post('/products', payload).subscribe(() => this.loadProducts());\n    }\n    toggle(product) {\n      this.api.put(`/products/${product._id}`, {\n        isActive: !product.isActive\n      }).subscribe(() => {\n        this.loadProducts();\n      });\n    }\n    static {\n      this.ɵfac = function AdminComponent_Factory(t) {\n        return new (t || AdminComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AdminComponent,\n        selectors: [[\"app-admin\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 13,\n        vars: 3,\n        consts: [[1, \"admin-form\", 3, \"ngSubmit\", \"formGroup\"], [\"formControlName\", \"title\", \"placeholder\", \"T\\u00EAn s\\u1EA3n ph\\u1EA9m\"], [\"formControlName\", \"slug\", \"placeholder\", \"Slug\"], [\"formControlName\", \"brand\", \"placeholder\", \"Th\\u01B0\\u01A1ng hi\\u1EC7u\"], [\"formControlName\", \"category\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"images\", \"placeholder\", \"\\u1EA2nh (URL, c\\u00E1ch nhau b\\u1EB1ng d\\u1EA5u ph\\u1EA9y)\"], [\"formControlName\", \"price\", \"type\", \"number\", \"placeholder\", \"Gi\\u00E1\"], [\"type\", \"submit\"], [\"class\", \"admin-item\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"admin-item\"], [3, \"click\"]],\n        template: function AdminComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"h2\");\n            i0.ɵɵtext(1, \"Qu\\u1EA3n tr\\u1ECB s\\u1EA3n ph\\u1EA9m\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(2, \"form\", 0);\n            i0.ɵɵlistener(\"ngSubmit\", function AdminComponent_Template_form_ngSubmit_2_listener() {\n              return ctx.createProduct();\n            });\n            i0.ɵɵelement(3, \"input\", 1)(4, \"input\", 2)(5, \"input\", 3);\n            i0.ɵɵelementStart(6, \"select\", 4);\n            i0.ɵɵtemplate(7, AdminComponent_option_7_Template, 2, 2, \"option\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(8, \"input\", 6)(9, \"input\", 7);\n            i0.ɵɵelementStart(10, \"button\", 8);\n            i0.ɵɵtext(11, \"T\\u1EA1o s\\u1EA3n ph\\u1EA9m\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(12, AdminComponent_div_12_Template, 6, 5, \"div\", 9);\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngForOf\", ctx.products);\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.DecimalPipe, ReactiveFormsModule, i2.ɵNgNoValidate, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n        styles: [\".admin-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .admin-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{display:block;margin-bottom:8px;padding:8px}.admin-item[_ngcontent-%COMP%]{background:#fff;padding:12px;border-radius:8px;margin-bottom:8px}\"]\n      });\n    }\n  }\n  return AdminComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}